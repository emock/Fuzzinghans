# This is a basic workflow to help you get started with Actions

name: Fuzzing

on:  
#   push:
#     branches: [ "main" ]
  pull_request:
    branches: ["release", "test"]

  workflow_dispatch:

jobs:     
  test:
    name: Test
    runs-on: ubuntu-latest
    if: contains('test', github.base_ref)
    steps:
      - uses: actions/checkout@main      
      - name: Clang++
        run: clang++ -g -fsanitize=fuzzer fuzz_me.cc        
      - name: Execute
        run: ./a.out -max_total_time=20
    
  release:
    name: Release
    runs-on: ubuntu-latest
    if: contains('release', github.base_ref)      
    steps:
      - uses: actions/checkout@main      
      - name: Clang++
        run: clang++ -g -fsanitize=address,fuzzer fuzz_me.cc        
      - name: Execute
        run: ./a.out -max_total_time=20
